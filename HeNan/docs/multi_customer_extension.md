# 多客户扩展配置文档

## 新增客户需求分析

本文档分析浙江移动、新疆电信、江西移动三个新客户的配置需求。

---

## 1. 浙江移动 (zhejiang_mobile)

### 基本信息
- **客户代码**: `zjyd`
- **客户名称**: 浙江移动
- **FTP地址**: `ftp://ftpmediazjyd:rD2q0y1M5eI@36.133.168.235:2121/`

### 剧头字段配置

| 列名 | 数据来源 | 说明 |
|------|---------|------|
| 剧头id | 自动生成 | 不需要填写，空着 |
| 剧集名称 | 关键字 | 介质名称 |
| 作者列表 | 版权数据库-作者 | |
| 清晰度 | 固定值 1 | 高清 |
| 总集数 | 版权数据库-集数 | |
| 主演 | 版权数据库-主演\嘉宾\主持人 | |
| 内容类型 | 版权数据库-一级分类 | |
| 上映年份 | 版权数据库-出品年代 | |
| 关键字 | 版权数据库-关键字 | |
| 导演 | 版权数据库-导演 | |
| 缩略图地址 | 图片URL | `ftp://ftpmediazjyd:rD2q0y1M5eI@36.133.168.235:2121/picture/zjyd/{abbr}0.jpg` |
| 海报地址 | 图片URL | `ftp://ftpmediazjyd:rD2q0y1M5eI@36.133.168.235:2121/picture/zjyd/{abbr}1.jpg` |
| 产品分类 | 映射 | 教育=1, 电竞=2, 少儿=3 |
| 描述 | 版权数据库-简介 | |
| 是否多集 | 计算 | 总集数>1则为1，否则为0 |
| 频道黑白图片 | 图片URL | `ftp://ftpmediazjyd:rD2q0y1M5eI@36.133.168.235:2121/picture/zjyd/{abbr}10.jpg` |
| 频道名字图片 | 图片URL | `ftp://ftpmediazjyd:rD2q0y1M5eI@36.133.168.235:2121/picture/zjyd/{abbr}12.jpg` |
| 一句话描述 | 版权数据库-推荐语/一句话介绍 | |
| 地区 | 版权数据库-国别 | |
| 流派 | 映射 | 教育/少儿=幼儿, 电竞=电竞 |

### 子集字段配置

| 列名 | 数据来源 | 说明 |
|------|---------|------|
| 子集id | 自动生成 | 不需要填写，空着 |
| 节目名称 | 格式化 | {剧集名称}第{00*}集 |
| 媒体拉取地址 | 媒体URL | `ftp://ftpmedia:rD2q0y!M5eI2@36.133.168.235:2121/media/zjyd/{dir}/{abbr}/{abbr}{0**}.ts` |
| 媒体类型 | 固定值 1 | 正片 |
| 集数 | 自动生成 | 按总集数排序 |
| 时长 | 自动填入 | 从扫描结果获取 |
| 文件大小 | 自动填入 | 从扫描结果获取 |
| 分辨率类型 | 固定值 8 | 1080P |
| 码流 | 固定值 53 | 4.0M（高清VBR） |

### 内容目录映射
- 电竞 → `dianjing`
- 教育 → `jiaoyu`
- 少儿 → `shaoer`

---

## 2. 新疆电信 (xinjiang_telecom)

### 基本信息
- **客户代码**: `xjdx`
- **客户名称**: 新疆电信

### 剧头字段配置

| 列名 | 数据来源 | 说明 |
|------|---------|------|
| CP名称 | 固定值 | 杭州维高 |
| 视频部名称 | 关键字 | 介质名称 |
| 内容分类 | 固定值 | 电竞 |
| 游戏分类 | 版权数据库-关键字 | |
| 主播 | 版权数据库-导演 | |
| 简介 | 版权数据库-简介 | 75字以内 |

### 子集字段配置

| 列名 | 数据来源 | 说明 |
|------|---------|------|
| 视频部名称 | 格式化 | {剧集名称} 第{0*}集 {子集标题} |
| 三级页面显示 | 格式化 | 第{0*}集 {子集标题} |
| 时长（秒） | 自动填入 | 从扫描结果获取 |
| 视频部名称 | 剧头名称 | 对应剧头的视频部名称 |

**注意**: 新疆电信的子集名称包含自定义标题（如"混沌初开"、"第一块砖"等），需要特殊处理。

---

## 3. 江西移动 (jiangxi_mobile)

### 基本信息
- **客户代码**: `jxyd`
- **客户名称**: 江西移动
- **图片URL**: `http://120.27.12.82:28080/img/jxyd/`
- **媒体URL**: `http://120.27.12.82:28080/hls/jxyd/`

### 剧头字段配置

| 列名 | 数据来源 | 说明 |
|------|---------|------|
| 剧头id | 自动生成 | 不需要填写，空着 |
| 剧集名称 | 关键字 | 介质名称 |
| 作者列表 | 版权数据库-作者 | |
| 清晰度 | 固定值 1 | 高清HD |
| 竖版大海报地址 | 图片URL | `http://120.27.12.82:28080/img/jxyd/{abbr}01.jpg` |
| 拼音 | 拼音缩写 | 剧集名称的首字母 |
| 语言 | 版权数据库-语言 | |
| 主演 | 版权数据库-主演\嘉宾\主持人 | |
| 描述 | 版权数据库-简介 | |
| 一级分类 | 版权数据库-一级分类 | |
| 二级分类 | 版权数据库-二级分类 | |
| 上映年份 | 版权数据库-出品年代 | |
| 总集数 | 版权数据库-集数 | |
| 首播日期 | 版权数据库-首播日期 | 格式: 2016-9-30 00:00:00 |
| 标签 | 版权数据库-关键字 | |
| 国家地区 | 版权数据库-国别 | |
| 评分 | 版权数据库-评分 | |
| 时长 | 版权数据库-总时长（分） | 整数 |
| 推荐语 | 版权数据库-推荐语/一句话介绍 | |
| 横版海报 | 图片URL | `http://120.27.12.82:28080/img/jxyd/{abbr}02.jpg` |
| 预告片 | 固定值 0 | 否 |
| 编剧 | 版权数据库-编剧 | |
| 搜索名 | 拼音缩写 | 剧集名称的首字母 |
| 版权平台 | 固定值 | TV |
| 版权开始时间 | 版权数据库-版权开始时间 | 格式: YYYY-MM-DD HH:mm:ss |
| 版权结束时间 | 版权数据库-版权结束时间 | 格式: YYYY-MM-DD HH:mm:ss |
| 版权区域 | 固定值 | 江西 |

### 子集字段配置

| 列名 | 数据来源 | 说明 |
|------|---------|------|
| 子集id | 自动生成 | 不需要填写，空着 |
| 节目名称 | 格式化 | {剧集名称}第{0*}集 |
| 集数 | 自动生成 | 按总集数排序 |
| 时长 | 自动填入 | 从扫描结果获取（分钟） |
| 单集 | 计算 | 总集数>1则为1，否则为0 |
| 媒体拉取地址 | 媒体URL | `http://120.27.12.82:28080/hls/jxyd/{abbr}/{abbr}{**}.ts` |
| md5 | MD5值 | 需要连接另外的脚本 |
| 码率清晰度 | 固定值 | 8M |

---

## 配置实现要点

### 1. 浙江移动特殊处理
- 需要4个图片URL（缩略图、海报、频道黑白图片、频道名字图片）
- 流派字段需要根据内容类型映射
- 媒体URL使用不同的FTP地址

### 2. 新疆电信特殊处理
- 剧头字段较少，只有6个字段
- 子集名称包含自定义标题，需要特殊处理
- 没有图片URL配置

### 3. 江西移动特殊处理
- 字段最多，包含28个剧头字段
- 需要日期时间格式转换
- 使用HTTP协议而非FTP
- 需要MD5值（需要对接脚本）

---

## 下一步工作

1. 在 `web_app1/config.py` 中添加三个新客户配置
2. 测试配置正确性
3. 验证数据导出功能
4. 更新文档
